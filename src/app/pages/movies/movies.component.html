<div class="row">
  <div class="col-lg-2 pt-3 border-end">
    <h5>Filtros</h5>
    <div class="row pt-3">
      <ng-container [formGroup]="form">
        <mat-form-field appearance="outline">
          <mat-label>Buscar</mat-label>
          <input
            formControlName="name"
            matInput
            placeholder="Busca por nombre"
          />
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        <mat-divider></mat-divider>
        <mat-radio-group
          (change)="getMovies($event.value)"
          class="radio-group py-3"
          formControlName="section"
        >
          <mat-radio-button
            class="radio-button"
            [checked]="form.get('section').value == 'popular'"
            value="popular"
          >
            Popular
          </mat-radio-button>
          <mat-radio-button
            class="radio-button"
            [checked]="form.get('section').value == 'now_playing'"
            value="now_playing"
          >
            En cartelera hoy
          </mat-radio-button>
          <mat-radio-button
            class="radio-button"
            [checked]="form.get('section').value == 'upcoming'"
            value="upcoming"
          >
            Próximamente
          </mat-radio-button>
          <mat-radio-button
            class="radio-button"
            [checked]="form.get('section').value == 'top_rated'"
            value="top_rated"
          >
            Mejor valoradas
          </mat-radio-button>
        </mat-radio-group>
        <mat-divider></mat-divider>
        <div class="py-3">
          <h6 class="text-muted">Géneros</h6>
          <mat-chip-listbox [multiple]="true" formControlName="genrer">
            <mat-chip-option [value]="genre.id" *ngFor="let genre of genres">{{
              genre.name
            }}</mat-chip-option>
          </mat-chip-listbox>
        </div>
      </ng-container>
    </div>
  </div>
  <div class="col-lg-10">
    <div class="d-flex justify-content-between mb-2">
      <div class="d-flex align-items-center">
        <h5>{{ title }}</h5>
      </div>
      <mat-paginator
        [length]="paginator.length"
        [pageSize]="movies.length"
        [pageIndex]="paginator.page - 1"
        (page)="handlePageEvent($event)"
        aria-label="Select page"
      >
      </mat-paginator>
    </div>
    <div class="row g-2 g-lg-5">
      <ng-container *ngFor="let movie of movies">
        <div
          class="col-xl-3 col-md-4 col-sm-6 min-width d-flex align-items-stretch"
        >
          <div
            class="card text-bg-light w-100 card-movie rounded"
            role="button"
          >
            <img
              class="card-img-top img-movie"
              [src]="getImagePath(movie.poster_path)"
            />
            <div class="card-body">
              <h6 class="card-title">{{ movie.title }}</h6>
            </div>
            <div class="card-footer d-flex justify-content-between">
              <div>{{ movie.release_date | date }}</div>
              <div>
                <span
                  class="badge rounded-pill"
                  [class]="
                    movie.vote_average >= 7
                      ? 'text-bg-success'
                      : movie.vote_average <= 4
                      ? 'text-bg-danger'
                      : movie.vote_average < 7 && movie.vote_average > 4
                      ? 'text-bg-warning'
                      : ''
                  "
                  >{{ movie.vote_average }}</span
                >
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <mat-paginator
      [length]="paginator.length"
      [pageSize]="movies.length"
      (page)="handlePageEvent($event)"
      aria-label="Select page"
    >
    </mat-paginator>
  </div>
</div>
